(this.webpackJsonpstudentreportreact=this.webpackJsonpstudentreportreact||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/schoolHeader.6fa5b71c.jpg"},25:function(e,t,a){e.exports=a(47)},30:function(e,t,a){},32:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),l=a.n(s),u=(a(30),a(3)),c=a.n(u),o=a(4),i=a(5),d=a(6),m=a(8),h=a(7),f=a(9),p=(a(32),a(23)),v=function(e){function t(e){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:null,onClick:function(){return e.props.display_form("login")}},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:null,onClick:function(){return e.props.display_form("signup")}},"Signup"))),a=r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:null,onClick:function(){return e.props.display_form("AdminInput")}},this.props.username)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:null,onClick:this.props.handle_logout},"Logout")));return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",onClick:this.props.display_home},"Student Report"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"}),r.a.createElement("span",{className:"navbar-text"},this.props.logged_in?a:t)))}}]),t}(n.Component),E=a(19),g=a(10),b=a(11),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){var a=Object(E.a)({},e);return a[t]=n,a}))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container mt-1"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Log In")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)}},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(g.a,{icon:b.d}))),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change,className:"form-control input_user",placeholder:"Username"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(g.a,{icon:b.a}))),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change,className:"form-control input_pass",placeholder:"Password"})),r.a.createElement("div",{className:"row align-items-center remember"},r.a.createElement("input",{type:"checkbox"}),"Remember Me"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Login",className:"btn float-right btn-outline-dark"})))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"d-flex justify-content-center links"},"Don't have an account? Forgot your password?"),r.a.createElement("div",{className:"d-flex justify-content-center"},"Contact Administrator")))))}}]),t}(r.a.Component),x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){var a=Object(E.a)({},e);return a[t]=n,a}))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container mt-1"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Sign Up")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)}},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(g.a,{icon:b.d}))),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change,className:"form-control input_user",placeholder:"Username"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(g.a,{icon:b.a}))),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change,className:"form-control input_pass",placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Sign Up",className:"btn float-right btn-outline-dark"})))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"d-flex justify-content-center"},"Contact Administrator")))))}}]),t}(r.a.Component);var y=function(){return r.a.createElement("div",{className:"container mt-1"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"welcome"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null," Information")),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},"Admin should:",r.a.createElement("ol",null,r.a.createElement("li",null,"maintain teacher's login details."),r.a.createElement("li",null,"add class' details."),r.a.createElement("li",null,"add student's details."),r.a.createElement("li",null,"add subjects (subject's code needs to be unique)"),r.a.createElement("li",null,"map student and subject"),r.a.createElement("li",null,"add exams"))),r.a.createElement("div",{className:"col-md-6"},"Teacher:",r.a.createElement("ol",null,r.a.createElement("li",null,"should add marks of each student.(subject teacher should add his/her subject's  marks.)"),r.a.createElement("li",null,"can see marks of all subjects"),r.a.createElement("li",null,"can see student's report card"),r.a.createElement("li",null,"cannot add comments (should be class teacher)"),r.a.createElement("li",null,"subjects with total marks 50 should be added as marks equivalent to 100"))))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"d-flex justify-content-center"},"Please login to continue")))))},k=a(1),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).find_st_mark=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?t.mark:0},a.find_st_60_mark=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?(.6*parseFloat(t.mark)).toFixed(2):0},a.find_st_cas=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?t.cas:0},a.find_st_40_cas=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?(.4*parseFloat(t.cas)).toFixed(2):0},a.find_st_total=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?(.6*parseFloat(t.mark)+.4*parseFloat(t.cas)).toFixed(2):0},a.find_st_tec_comment=function(e){var t=a.state.studentsresult.find((function(t){return t.student==e.id}));return t?t.teachers_comment:""},a.input_result_clicked=function(){a.setState({gradevalue:"",studentvalue:"",subjectvalue:"",examvalue:"",inputresultclicked:!0,studnetresultclicked:!1,classmarksclicked:!1}),a.gradeselectRef.current&&(a.gradeselectRef.current.selectedIndex=0),a.subjectselectRef.current&&(a.subjectselectRef.current.selectedIndex=0),a.examselectRef.current&&(a.examselectRef.current.selectedIndex=0)},a.student_result_clicked=function(){a.props.show_result()},a.class_marks_clicked=function(){a.setState({gradevalue:"",studentvalue:"",subjectvalue:"",examvalue:"",inputresultclicked:!1,studnetresultclicked:!1,classmarksclicked:!0}),a.gradeselectRef.current&&(a.gradeselectRef.current.selectedIndex=0),a.subjectselectRef.current&&(a.subjectselectRef.current.selectedIndex=0),a.examselectRef.current&&(a.examselectRef.current.selectedIndex=0)},a.state={grades:[],students:[],gradestudents:[],subjects:[],exams:[],results:[],studentsresult:[],gradevalue:"",studentvalue:"",subjectvalue:"",examvalue:"",inputresultclicked:!0,studnetresultclicked:!1,classmarksclicked:!1},a.gradeselectRef=r.a.createRef(),a.examselectRef=r.a.createRef(),a.subjectselectRef=r.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"get_grades",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/teachers-view-grade/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({grades:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"teacher_get_subjects_by_grade",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return a=e.sent,e.next=5,fetch("/teachers-view-subjects-grade/"+t+"/",{method:"GET",headers:a}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){n.setState({subjects:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teacher_get_students_marks",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return(t=e.sent)["Content-Type"]="application/json",e.next=6,fetch("/teachers-view-students_marks/",{method:"POST",headers:t,body:JSON.stringify({grade:this.state.gradevalue,exam:this.state.examvalue,subject:this.state.subjectvalue})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({studentsresult:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"teacher_get_students_by_subject",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return a=e.sent,e.next=5,fetch("/teachers-view-students-by-subject/"+t+"/",{method:"GET",headers:a}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){n.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teacher_get_students_by_grade",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return a=e.sent,e.next=5,fetch("/teachers-view-students-by-grade/"+t+"/",{method:"GET",headers:a}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){n.setState({gradestudents:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teacher_get_exams",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/teachers-view-exams/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({exams:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_exam_result_by_grade",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return n=e.sent,e.next=5,fetch("/get-exam-result-by-grade/"+t+"/"+a+"/",{method:"GET",headers:n}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){r.setState({results:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.get_grades(),this.teacher_get_exams()}},{key:"grade_selected",value:function(e){this.setState({gradevalue:e.target.value,students:[],subjects:[],results:[],studentsresult:[],studentvalue:"",subjectvalue:"",examvalue:""}),this.teacher_get_subjects_by_grade(e.target.value),this.teacher_get_students_by_grade(e.target.value),this.subjectselectRef.current&&(this.subjectselectRef.current.selectedIndex=0),this.examselectRef.current&&(this.examselectRef.current.selectedIndex=0)}},{key:"subject_selected",value:function(e){this.setState({subjectvalue:e.target.value}),this.teacher_get_students_by_subject(e.target.value),this.teacher_get_students_marks()}},{key:"student_selected",value:function(e){this.setState({studentvalue:e.target.value})}},{key:"exam_selected",value:function(e){this.setState({examvalue:e.target.value,results:[],studentsresult:[],studentvalue:"",subjectvalue:""}),this.state.classmarksclicked&&(this.state.gradevalue?this.get_exam_result_by_grade(e.target.value,this.state.gradevalue):k.a.warn("Please Select Grade")),this.subjectselectRef.current&&(this.subjectselectRef.current.selectedIndex=0)}},{key:"teachers_update_marks",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r,s,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.id,n=t.target.value,t.target.value=null,n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.props.auth_headers();case 7:return(r=e.sent)["Content-Type"]="application/json",s=this.state.studentsresult.find((function(e){return e.student==a})),l={grade:this.state.gradevalue,exam:this.state.examvalue,subject:this.state.subjectvalue,student:a,marks:n,cas:s?s.cas:0,comment:s?s.teachers_comment:""},e.next=13,fetch("/teachers-update-student-mark/",{method:"POST",headers:r,body:JSON.stringify(l)}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){u.teacher_get_students_marks()})).catch((function(e){k.a.error("Something went Wrong!")}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teachers_update_cas",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r,s,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.id,n=t.target.value,t.target.value=null,n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.props.auth_headers();case 7:return(r=e.sent)["Content-Type"]="application/json",s=this.state.studentsresult.find((function(e){return e.student==a})),l={grade:this.state.gradevalue,exam:this.state.examvalue,subject:this.state.subjectvalue,student:a,marks:s?s.mark:0,cas:n,comment:s?s.teachers_comment:""},e.next=13,fetch("/teachers-update-student-cas/",{method:"POST",headers:r,body:JSON.stringify(l)}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){u.teacher_get_students_marks()})).catch((function(e){k.a.error("Something went Wrong!")}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"teachers_update_comment",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r,s,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.id,n=t.target.value,t.target.value=null,r=this.state.studentsresult.find((function(e){return e.student==a})),n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.props.auth_headers();case 8:return(s=e.sent)["Content-Type"]="application/json",l={grade:this.state.gradevalue,exam:this.state.examvalue,subject:this.state.subjectvalue,student:a,marks:r?r.mark:0,cas:r?r.cas:0,comment:n},e.next=13,fetch("/teachers-update-student-comment/",{method:"POST",headers:s,body:JSON.stringify(l)}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){u.teacher_get_students_marks()})).catch((function(e){k.a.error("Something went Wrong!")}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("li",{className:"btn-group mx-2"},r.a.createElement("span",{className:"mx-2"},"Subject"),r.a.createElement("select",{onChange:function(t){return e.subject_selected(t)},ref:this.subjectselectRef,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.subjects.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),a=r.a.createElement("li",{className:"btn-group mx-2"},r.a.createElement("span",{className:"mx-2"},"Student"),r.a.createElement("select",{onChange:function(t){return e.student_selected(t)},ref:this.studentselectRef,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.gradestudents.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.student_name)})))),n=r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SN"),r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Theory"),r.a.createElement("th",null,"CAS"),r.a.createElement("th",null,"60% of Theory"),r.a.createElement("th",null,"40% of CAS"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,this.state.students.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,r.a.createElement("span",{className:"form-control-sm"},t.student_name)),r.a.createElement("td",null,r.a.createElement("input",{type:"number",placeholder:e.find_st_mark(t),id:t.id,className:"form-control form-control-sm",onBlur:function(t){return e.teachers_update_marks(t)}})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",placeholder:e.find_st_cas(t),id:t.id,className:"form-control form-control-sm",onBlur:function(t){return e.teachers_update_cas(t)}})),r.a.createElement("td",null,r.a.createElement("span",{id:t.id},e.find_st_60_mark(t))),r.a.createElement("td",null,r.a.createElement("span",{id:t.id},e.find_st_40_cas(t))),r.a.createElement("td",null,r.a.createElement("span",{id:t.id},e.find_st_total(t))))}))))),s=r.a.createElement("div",{className:"container "},r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("caption",null,"Terminal assess"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SN "),r.a.createElement("th",null,"Student"),this.state.subjects.map((function(e,t){return r.a.createElement("th",{key:t},e.name)})))),r.a.createElement("tbody",null,this.state.gradestudents.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.student_name),e.state.subjects.map((function(a,n){return r.a.createElement("td",{key:n},e.state.results.map((function(n){return n.student==t.id&&n.subject==a.id&&n.exam==e.state.examvalue?parseFloat(n.mark).toFixed(2):null})))})))})))),r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("caption",null,"CAS assess"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SN "),r.a.createElement("th",null,"Student"),this.state.subjects.map((function(e,t){return r.a.createElement("th",{key:t},e.name)})))),r.a.createElement("tbody",null,this.state.gradestudents.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.student_name),e.state.subjects.map((function(a,n){return r.a.createElement("td",{key:n},e.state.results.map((function(n){return n.student==t.id&&n.subject==a.id&&n.exam==e.state.examvalue?parseFloat(n.cas).toFixed(2):null})))})))})))));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light my-2"},r.a.createElement("div",{className:"navbar-brand btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.inputresultclicked?"Input marks ":this.state.studnetresultclicked?"Student marks ":this.state.classmarksclicked?"Class marks ":"Menu "),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("button",{className:"dropdown-item",onClick:this.input_result_clicked},"Input marks"),r.a.createElement("button",{className:"dropdown-item",onClick:this.class_marks_clicked},"Class marks"),r.a.createElement("button",{className:"dropdown-item",onClick:this.student_result_clicked},"Result"))),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText1","aria-controls":"navbarText1","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText1"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"btn-group mx-2"},r.a.createElement("span",{className:"mx-2"},"Grade"),r.a.createElement("select",{onChange:function(t){return e.grade_selected(t)},ref:this.gradeselectRef,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.grades.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),r.a.createElement("li",{className:"btn-group mx-2"},r.a.createElement("span",{className:"mx-2"},"Exam"),r.a.createElement("select",{onChange:function(t){return e.exam_selected(t)},ref:this.examselectRef,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.exams.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),this.state.examvalue?this.state.inputresultclicked&&this.state.gradevalue?t:this.state.studnetresultclicked?a:null:null)))),this.state.inputresultclicked?this.state.subjectvalue?n:null:this.state.classmarksclicked&&0!=this.state.subjects.length?s:null)}}]),t}(n.Component),j=(a(42),a(16)),S=function(e){return e>=90&&e<=100?{grade:"A+",gpa:"4.0"}:e>=80&&e<=89?{grade:"A",gpa:"3.6"}:e>=70&&e<=79?{grade:"B+",gpa:"3.2"}:e>=60&&e<=69?{grade:"B",gpa:"2.8"}:e>=50&&e<=59?{grade:"C+",gpa:"2.4"}:e>=40&&e<=49?{grade:"C",gpa:"2.0"}:e>=30&&e<=39?{grade:"D+",gpa:"1.6"}:e>=20&&e<=29?{grade:"D",gpa:"1.2"}:{grade:"E",gpa:"0.8"}},w=a(18),O=a.n(w),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).student_result_clicked=function(){a.setState({examvalue:null,examvaluemulti1:null,examvaluemulti2:null,examvaluemulti3:null,studentresultclicked:!0,gradevalue:null,studentvalue:null,gradestudentresultclicked:!1,finalreportclicked:!1,gradestudentfinalreportclicked:!1}),a.gradeselectRef.current&&(a.gradeselectRef.current.selectedIndex=0),a.examselectRef.current&&(a.examselectRef.current.selectedIndex=0)},a.grade_student_result_clicked=function(){a.setState({gradevalue:null,studentvalue:null,examvalue:null,examvaluemulti1:null,examvaluemulti2:null,examvaluemulti3:null,studentresultclicked:!1,gradestudentresultclicked:!0,finalreportclicked:!1,gradestudentfinalreportclicked:!1}),a.gradeselectRef.current&&(a.gradeselectRef.current.selectedIndex=0),a.examselectRef.current&&(a.examselectRef.current.selectedIndex=0),a.examselectRef.current&&(a.examselectRef.current.selectedIndex=0)},a.final_report_clicked=function(){a.setState({gradestudents:[],graderesults:[],gradesubjects:[],studentresults:[],studentresultsmulti1:[],studentresultsmulti2:[],studentresultsmulti3:[],resultcomments:[],examvalue:null,examvaluemulti1:null,examvaluemulti2:null,examvaluemulti3:null,gradevalue:null,studentvalue:null,classteacher:!1,studentresultclicked:!1,gradestudentresultclicked:!1,finalreportclicked:!0,gradestudentfinalreportclicked:!1})},a.grade_student_final_report_clicked=function(){a.setState({gradestudents:[],graderesults:[],gradesubjects:[],studentresults:[],studentresultsmulti1:[],studentresultsmulti2:[],studentresultsmulti3:[],resultcomments:[],examvalue:null,examvaluemulti1:null,examvaluemulti2:null,examvaluemulti3:null,gradevalue:null,studentvalue:null,classteacher:!1,studentresultclicked:!1,gradestudentresultclicked:!1,finalreportclicked:!1,gradestudentfinalreportclicked:!0})},a.resultcomment=function(e,t){var n=a.state.resultcomments.find((function(a){return a.student==e&&a.exam==t}));return n?n.result_comment:""},a.state={exams:[],students:[],grades:[],gradestudents:[],graderesults:[],gradesubjects:[],studentresults:[],studentresultsmulti1:[],studentresultsmulti2:[],studentresultsmulti3:[],resultcomments:[],examvalue:null,examvaluemulti1:null,examvaluemulti2:null,examvaluemulti3:null,gradevalue:null,studentvalue:null,classteacher:!1,studentresultclicked:!0,gradestudentresultclicked:!1,finalreportclicked:!1,gradestudentfinalreportclicked:!1},a.gradeselectRef=r.a.createRef(),a.examselectRef=r.a.createRef(),a.examselectRef1=r.a.createRef(),a.examselectRef2=r.a.createRef(),a.examselectRef3=r.a.createRef(),a.studentselectRef=r.a.createRef(),a.filterstudentsinputid=r.a.createRef(),a.filterstudentslist=r.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"get_grades",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/view-grades/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({grades:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"teacher_get_exams",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/teachers-view-exams/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({exams:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_all_students",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/get-all-students/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_student_result",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a,n){var r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return r=e.sent,e.next=5,fetch("/get-student-result/"+t+"/"+a+"/",{method:"GET",headers:r}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){0==n?s.setState({studentresults:e}):1==n?s.setState({studentresultsmulti1:e}):2==n?s.setState({studentresultsmulti2:e}):3==n&&s.setState({studentresultsmulti3:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"get_subjects_by_grade",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return a=e.sent,e.next=5,fetch("/get-subjects-grade/"+t+"/",{method:"GET",headers:a}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){n.setState({gradesubjects:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"find_result_comment",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return a=e.sent,e.next=5,fetch("/get-exam-comment/"+t+"/",{method:"GET",headers:a}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){n.setState({resultcomments:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_result_comment",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a,n){var r,s,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value,t.target.value=null,r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.props.auth_headers();case 6:return(s=e.sent)["Content-Type"]="application/json",e.next=10,fetch("/update-result-comment/",{method:"POST",headers:s,body:JSON.stringify({comment:r,student:a,exam:n})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){l.setState({resultcomments:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.get_grades(),this.teacher_get_exams(),this.get_all_students()}},{key:"grade_selected",value:function(e){this.setState({gradevalue:e.target.value,studentresults:[],studentresultsmulti1:[],studentresultsmulti2:[],studentresultsmulti3:[]}),(this.state.gradestudentresultclicked||this.state.gradestudentfinalreportclicked)&&this.get_subjects_by_grade(e.target.value),this.examselectRef1.current&&(this.examselectRef1.current.selectedIndex=0),this.examselectRef2.current&&(this.examselectRef2.current.selectedIndex=0),this.examselectRef3.current&&(this.examselectRef3.current.selectedIndex=0)}},{key:"student_selected",value:function(e){this.setState({studentvalue:e.target.attributes.value.value,studentresults:[],studentresultsmulti1:[],studentresultsmulti2:[],studentresultsmulti3:[]}),this.filterstudentsinputid.current.placeholder=this.state.students.find((function(t){return t.id==e.target.attributes.value.value})).student_name,this.examselectRef.current&&(this.examselectRef.current.selectedIndex=0)}},{key:"filterStudents",value:function(e){var t=this,a=e.target.value.toUpperCase();this.state.students.forEach((function(e){e.student_name.toUpperCase().indexOf(a)>-1?t.filterstudentslist.current.childNodes.forEach((function(t){e.id==t.attributes.value.value&&(t.style.display="")})):t.filterstudentslist.current.childNodes.forEach((function(t){e.id==t.attributes.value.value&&(t.style.display="none")}))}))}},{key:"exam_selected",value:function(e,t){var a=this;if(0==t?this.setState({examvalue:e.target.value,studentresults:[]}):1==t?this.setState({examvaluemulti1:e.target.value,studentresultsmulti1:[]}):2==t?this.setState({examvaluemulti2:e.target.value,studentresultsmulti2:[]}):3==t&&this.setState({examvaluemulti3:e.target.value,studentresultsmulti3:[]}),this.state.studentresultclicked||this.state.finalreportclicked){var n=this.state.studentvalue;this.get_student_result(n,e.target.value,t);var r=this.state.students.find((function(e){return e.id==n})).student_grade;this.get_subjects_by_grade(r)}else if(this.state.gradestudentresultclicked||this.state.gradestudentfinalreportclicked){var s=this.state.gradevalue;this.state.students.map((function(n,r){n.student_grade==s&&a.get_student_result_calledbyall(n.id,e.target.value,"results"+r+t)}))}this.find_result_comment(e.target.value)}},{key:"get_student_result_calledbyall",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a,n){var r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return r=e.sent,e.next=5,fetch("/get-student-result/"+t+"/"+a+"/",{method:"GET",headers:r}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){s.setState(Object(j.a)({},n,e))})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"get_subjects_by_grade_calledbyall",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return n=e.sent,e.next=5,fetch("/get-subjects-grade/"+t+"/",{method:"GET",headers:n}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){r.setState(Object(j.a)({},a,e))})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"result_table",value:function(){var e=this;if(this.state.gradestudentresultclicked){var t=this.state.examvalue;if(t){var a=this.state.exams.find((function(e){return e.id==t})).name,n=this.state.students,s=[],l=[],u=this.state.gradevalue;return n.map((function(n,c){if(n.student_grade==u){var o="results"+c+0;l[c]=e.state[o];var i=[],d=r.a.createElement("div",{className:"container mt-2",key:c},r.a.createElement("div",{className:"container result"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Exam Report: ",a)),r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},"Name: ",n.student_name),r.a.createElement("td",{colSpan:"2"},"Class: ",e.state.grades.find((function(e){return e.id==n.student_grade})).name),r.a.createElement("td",null,"Class Teacher Remarks")),r.a.createElement("tr",null,r.a.createElement("td",null,"SN"),r.a.createElement("td",null,"Subjects"),r.a.createElement("td",null,"Theory"),r.a.createElement("td",null,"Practical"),r.a.createElement("td",null,"Total"),r.a.createElement("td",null,"GPA"),r.a.createElement("td",null,"Grade"),r.a.createElement("td",{rowSpan:"0"},e.state.grades.find((function(t){return t.classteacher==e.props.userid}))?r.a.createElement("textarea",{rows:"4",placeholder:e.resultcomment(n.id,t),className:"form-control form-control-sm",onBlur:function(a){return e.update_result_comment(a,n.id,t)}}):e.resultcomment(n.id,t))),l[c]?l[c].map((function(t,a){if(e.state.gradesubjects.find((function(e){return e.id==t.subject}))){var n=Math.round(.6*parseFloat(t.mark)),s=Math.round(.4*parseFloat(t.cas)),l=n+s,u=S(l);return i.push(u.gpa),a?1:1,r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,e.state.gradesubjects.map((function(e){return e.id==t.subject?e.name:null}))),r.a.createElement("td",null,n),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,u.gpa),r.a.createElement("td",null,u.grade))}})):null),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"}),r.a.createElement("th",{colSpan:"2"},"GPA: ",i.length?(i.reduce((function(e,t){return"FAIL"!=t?e+parseFloat(t):e}),0)/i.length).toFixed(2):"N/A"),r.a.createElement("td",null)))),r.a.createElement("div",{className:"row signature-div"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement("b",{className:"signature"},"Class Teacher")),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-center"},r.a.createElement("b",{className:"signature"},"Principal")))));s.push(d)}})),s}}else{var c=this.state.examvalue;if(c){var o=this.state.exams.find((function(e){return e.id==c})).name,i=this.state.students,d=this.state.studentvalue,m=i.find((function(e){return e.id==d})),h=this.state.studentresults,f=this.state.gradesubjects,p=[],v=0;return r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"container result"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Exam Report: ",o)),r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},"Name: ",m.student_name),r.a.createElement("td",{colSpan:"2"},"Class: ",this.state.grades.find((function(e){return e.id==m.student_grade})).name),r.a.createElement("td",null,"Class Teacher Remarks")),r.a.createElement("tr",null,r.a.createElement("td",null,"SN"),r.a.createElement("td",null,"Subjects"),r.a.createElement("td",null,"Theory"),r.a.createElement("td",null,"Practical"),r.a.createElement("td",null,"Total"),r.a.createElement("td",null,"GPA"),r.a.createElement("td",null,"Grade"),r.a.createElement("td",{rowSpan:"0"},this.state.grades.find((function(t){return t.classteacher==e.props.userid}))?r.a.createElement("textarea",{rows:"4",placeholder:this.resultcomment(m.id,c),className:"form-control form-control-sm",onBlur:function(t){return e.update_result_comment(t,m.id,c)}}):this.resultcomment(m.id,c))),h.length>0?h.map((function(e,t){if(f.find((function(t){return t.id==e.subject}))){var a=Math.round(.6*parseFloat(e.mark)),n=Math.round(.4*parseFloat(e.cas)),s=a+n,l=S(s);return p.push(l.gpa),t?v+=1:v=1,r.a.createElement("tr",{key:t},r.a.createElement("td",null,v),r.a.createElement("td",null,f.map((function(t){return t.id==e.subject?t.name:null}))),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,s),r.a.createElement("td",null,l.gpa),r.a.createElement("td",null,l.grade))}})):null),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"}),r.a.createElement("th",{colSpan:"2"},"GPA: ",p.length?(p.reduce((function(e,t){return"FAIL"!=t?e+parseFloat(t):e}),0)/p.length).toFixed(2):"N/A"),r.a.createElement("td",null)))),r.a.createElement("div",{className:"row signature-div"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement("b",{className:"signature"},"Class Teacher")),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-center"},r.a.createElement("b",{className:"signature"},"Principal")))))}}}},{key:"student_report_table",value:function(){var e=this.state.examvaluemulti1,t=this.state.examvaluemulti2,a=this.state.examvaluemulti3;if(e&&t&&a){var n=this.state.gradesubjects,s=this.state.studentresultsmulti1,l=this.state.studentresultsmulti2,u=this.state.studentresultsmulti3,c=this.state.students,o=this.state.studentvalue,i=c.find((function(e){return e.id==o})),d=[];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"report"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Progress Report")),r.a.createElement("div",{className:"row text-left"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("b",{className:"mx-4"},"Name:",i.student_name)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("b",{className:"mx-4"},"Grade:",this.state.grades.find((function(e){return e.id==i.student_grade})).name))),r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-bordered table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:"2"},"Subjects"),r.a.createElement("td",null,"1ST TERM"),r.a.createElement("td",null,"2ND TERM"),r.a.createElement("td",null,"3RD TERM"),r.a.createElement("td",null,"AVERAGE"),r.a.createElement("td",{rowSpan:"2"},"GPA"),r.a.createElement("td",{rowSpan:"2"},"GRADE")),r.a.createElement("tr",null,r.a.createElement("td",null,"20%"),r.a.createElement("td",null,"30%"),r.a.createElement("td",null,"50%"),r.a.createElement("td",null,"100%")),n.map((function(e){var t=s.find((function(t){return t.student==i.id&&t.subject==e.id})),a=l.find((function(t){return t.student==i.id&&t.subject==e.id})),n=u.find((function(t){return t.student==i.id&&t.subject==e.id}));t||(t={}),a||(a={}),n||(n={});var c=Math.round(.6*parseFloat(t.mark))+Math.round(.4*parseFloat(t.cas)),o=Math.round(.6*parseFloat(a.mark))+Math.round(.4*parseFloat(a.cas)),m=Math.round(.6*parseFloat(n.mark))+Math.round(.4*parseFloat(n.cas)),h=Math.round(.2*c),f=Math.round(.3*o),p=Math.round(.5*m),v=h+f+p,E=S(v);return d.push(E.gpa),r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,h.toString()),r.a.createElement("td",null,f.toString()),r.a.createElement("td",null,p.toString()),r.a.createElement("td",null,v.toString()),r.a.createElement("td",null,E.gpa),r.a.createElement("td",null,E.grade))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-center "},r.a.createElement("table",{className:"table table-sm col-md-6 grade_to_gpa"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Grade"),r.a.createElement("td",null,"GPA")),r.a.createElement("tr",null,r.a.createElement("td",null,"A+"),r.a.createElement("td",null,"Outstanding 4.0")),r.a.createElement("tr",null,r.a.createElement("td",null,"A"),r.a.createElement("td",null,"Excellent 3.6")),r.a.createElement("tr",null,r.a.createElement("td",null,"B+"),r.a.createElement("td",null,"Very Good 3.2")),r.a.createElement("tr",null,r.a.createElement("td",null,"B"),r.a.createElement("td",null,"Good 2.8")),r.a.createElement("tr",null,r.a.createElement("td",null,"C+"),r.a.createElement("td",null,"Satisfactory 2.4")),r.a.createElement("tr",null,r.a.createElement("td",null,"C"),r.a.createElement("td",null,"Acceptable 2.0")),r.a.createElement("tr",null,r.a.createElement("td",null,"D+"),r.a.createElement("td",null,"Partially Acceptable 1.6")),r.a.createElement("tr",null,r.a.createElement("td",null,"D"),r.a.createElement("td",null,"Insufficient 1.2")),r.a.createElement("tr",null,r.a.createElement("td",null,"E"),r.a.createElement("td",null,"Very Insufficient 0.8"))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",null,r.a.createElement("b",null,"GPA: ",d.length?(d.reduce((function(e,t){return"FAIL"!=t?e+parseFloat(t):e}),0)/d.length).toFixed(2):"N/A")),r.a.createElement("div",{className:"row signature-div"},r.a.createElement("span",{className:"col-md-6"},r.a.createElement("b",{className:"signature"},"Class Teacher")),r.a.createElement("span",{className:"col-md-6"},r.a.createElement("b",{className:"signature"},"Principal")))))))}}},{key:"grade_student_report_table",value:function(){var e=this,t=this.state.examvaluemulti1,a=this.state.examvaluemulti2,n=this.state.examvaluemulti3;if(t&&a&&n){var s=this.state.gradesubjects,l=this.state.students,u=[],c=this.state.gradevalue;return l.map((function(t,a){if(t.student_grade==c){var n=[],l=r.a.createElement("div",{className:"container mt-2",key:a},r.a.createElement("div",{className:"report"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Progress Report")),r.a.createElement("div",{className:"row text-left"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("b",{className:"mx-4"},"Name:",t.student_name)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("b",{className:"mx-4"},"Grade:",e.state.grades.find((function(e){return e.id==t.student_grade})).name))),r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-bordered table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:"2"},"Subjects"),r.a.createElement("td",null,"1ST TERM"),r.a.createElement("td",null,"2ND TERM"),r.a.createElement("td",null,"3RD TERM"),r.a.createElement("td",null,"AVERAGE"),r.a.createElement("td",{rowSpan:"2"},"GPA"),r.a.createElement("td",{rowSpan:"2"},"GRADE")),r.a.createElement("tr",null,r.a.createElement("td",null,"20%"),r.a.createElement("td",null,"30%"),r.a.createElement("td",null,"50%"),r.a.createElement("td",null,"100%")),s.map((function(s,l){var u="results"+a+1,c="results"+a+2,o="results"+a+3;if(e.state[u]&&e.state[c]&&e.state[o]){var i=e.state[u].find((function(e){return e.student==t.id&&e.subject==s.id})),d=e.state[c].find((function(e){return e.student==t.id&&e.subject==s.id})),m=e.state[o].find((function(e){return e.student==t.id&&e.subject==s.id}));i||(i={}),d||(d={}),m||(m={});var h=Math.round(.6*parseFloat(i.mark))+Math.round(.4*parseFloat(i.cas)),f=Math.round(.6*parseFloat(d.mark))+Math.round(.4*parseFloat(d.cas)),p=Math.round(.6*parseFloat(m.mark))+Math.round(.4*parseFloat(m.cas)),v=Math.round(.2*h),E=Math.round(.3*f),g=Math.round(.5*p),b=v+E+g,_=S(b);return n.push(_.gpa),r.a.createElement("tr",{key:l},r.a.createElement("td",null,s.name),r.a.createElement("td",null,v.toString()),r.a.createElement("td",null,E.toString()),r.a.createElement("td",null,g.toString()),r.a.createElement("td",null,b.toString()),r.a.createElement("td",null,_.gpa),r.a.createElement("td",null,_.grade))}}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-center "},r.a.createElement("table",{className:"table table-sm col-md-6 grade_to_gpa"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Grade"),r.a.createElement("td",null,"GPA")),r.a.createElement("tr",null,r.a.createElement("td",null,"A+"),r.a.createElement("td",null,"Outstanding 4.0")),r.a.createElement("tr",null,r.a.createElement("td",null,"A"),r.a.createElement("td",null,"Excellent 3.6")),r.a.createElement("tr",null,r.a.createElement("td",null,"B+"),r.a.createElement("td",null,"Very Good 3.2")),r.a.createElement("tr",null,r.a.createElement("td",null,"B"),r.a.createElement("td",null,"Good 2.8")),r.a.createElement("tr",null,r.a.createElement("td",null,"C+"),r.a.createElement("td",null,"Satisfactory 2.4")),r.a.createElement("tr",null,r.a.createElement("td",null,"C"),r.a.createElement("td",null,"Acceptable 2.0")),r.a.createElement("tr",null,r.a.createElement("td",null,"D+"),r.a.createElement("td",null,"Partially Acceptable 1.6")),r.a.createElement("tr",null,r.a.createElement("td",null,"D"),r.a.createElement("td",null,"Insufficient 1.2")),r.a.createElement("tr",null,r.a.createElement("td",null,"E"),r.a.createElement("td",null,"Very Insufficient 0.8"))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",null,r.a.createElement("b",null,"GPA: ",n.length?(n.reduce((function(e,t){return"FAIL"!=t?e+parseFloat(t):e}),0)/n.length).toFixed(2):"N/A")),r.a.createElement("div",{className:"row signature-div"},r.a.createElement("span",{className:"col-md-6"},r.a.createElement("b",{className:"signature"},"Class Teacher")),r.a.createElement("span",{className:"col-md-6"},r.a.createElement("b",{className:"signature"},"Principal")))))));u.push(l)}})),u}}},{key:"render",value:function(){var e=this,t=r.a.createElement("li",{className:"btn-group mx-2 my-auto"},r.a.createElement("span",{className:"my-auto"},"Grade"),r.a.createElement("select",{onChange:function(t){return e.grade_selected(t)},ref:this.gradeselectRef,className:"form-control form-control-sm my-auto",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.grades.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),a=r.a.createElement("li",{className:"btn-group mx-auto my-auto"},r.a.createElement("span",{className:"my-auto"},"Student"),r.a.createElement("div",{className:"form-inline input-group dropdown mx-2"},r.a.createElement("input",{type:"text",className:"form-control dropdown-toggle form-control-sm my-auto","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",placeholder:"Search Student",onKeyUp:function(t){return e.filterStudents(t)},ref:this.filterstudentsinputid}),r.a.createElement("span",{className:"input-group-text form-control-sm",disabled:!0},r.a.createElement(g.a,{icon:b.b})),r.a.createElement("div",{className:"dropdown-menu overflow-auto",style:{height:"200px"}},r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Students Name"))),r.a.createElement("tbody",{ref:this.filterstudentslist},this.state.students.map((function(t,a){return r.a.createElement("tr",{key:a,value:t.id},r.a.createElement("td",{onClick:function(t){return e.student_selected(t)},value:t.id},t.student_name))}))))))),n=r.a.createElement("li",{className:"btn-group mx-2",key:"es0"},r.a.createElement("span",{className:"mx-2"},"Exam"),r.a.createElement("select",{onChange:function(t){return e.exam_selected(t,0)},ref:this.examselectRef,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.exams.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),s=r.a.createElement("li",{className:"form-group mx-1",key:"es1"},r.a.createElement("span",{className:"mx-1"},"1st Term"),r.a.createElement("select",{onChange:function(t){return e.exam_selected(t,1)},ref:this.examselectRef1,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.exams.map((function(e,t){return"1st"==e.exam_term?r.a.createElement("option",{key:t,value:e.id},e.name):null})))),l=r.a.createElement("li",{className:"form-group mx-1",key:"es2"},r.a.createElement("span",{className:"mx-1"},"2nd Term"),r.a.createElement("select",{onChange:function(t){return e.exam_selected(t,2)},ref:this.examselectRef2,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.exams.map((function(e,t){return"2nd"==e.exam_term?r.a.createElement("option",{key:t,value:e.id},e.name):null})))),u=r.a.createElement("li",{className:"form-group mx-1",key:"es3"},r.a.createElement("span",{className:"mx-1"},"3rd Term"),r.a.createElement("select",{onChange:function(t){return e.exam_selected(t,3)},ref:this.examselectRef3,className:"form-control form-control-sm",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},"Select an Option "),this.state.exams.map((function(e,t){return"3rd"==e.exam_term?r.a.createElement("option",{key:t,value:e.id},e.name):null}))));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light my-2"},r.a.createElement("div",{className:"navbar-brand btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.studentresultclicked?"Student result ":this.state.gradestudentresultclicked?"Grade all students result ":this.state.finalreportclicked?"Final Report ":this.state.gradestudentfinalreportclicked?"Grade all students Final report ":"Menu "),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("button",{className:"dropdown-item",onClick:this.student_result_clicked},"Student result"),r.a.createElement("button",{className:"dropdown-item",onClick:this.grade_student_result_clicked},"Grade all student result"),r.a.createElement("button",{className:"dropdown-item",onClick:this.final_report_clicked},"Final report"),r.a.createElement("button",{className:"dropdown-item",onClick:this.grade_student_final_report_clicked},"Grade all students Final report"),r.a.createElement("button",{className:"dropdown-item",onClick:this.props.show_home},"Go to marks input form"))),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText1","aria-controls":"navbarText1","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText1"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},this.state.gradestudentresultclicked||this.state.gradestudentfinalreportclicked?t:null,this.state.gradestudentresultclicked&&this.state.gradevalue?n:null,this.state.gradestudentfinalreportclicked&&this.state.gradevalue?[s,l,u]:null,this.state.studentresultclicked||this.state.finalreportclicked?a:null,this.state.studentresultclicked&&this.state.studentvalue?n:null,this.state.finalreportclicked&&this.state.studentvalue?[s,l,u]:null)))),this.state.studentresultclicked||this.state.gradestudentresultclicked?this.result_table():null,this.state.finalreportclicked?this.student_report_table():null,this.state.gradestudentfinalreportclicked?this.grade_student_report_table():null)}}]),t}(n.Component),T=(n.Component,R),C=a(13),F=a(24),G=a.n(F),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).edit_student_clicked=function(){a.setState({display:1})},a.edit_student_subject_clicked=function(){a.setState({display:2})},a.import_from_csv=function(){a.setState({display:3})},a.state={teachers:[],grades:[],students:[],subjects:[],studentsubject:[],studentvalue:"",display:0,jsonfromcsv:[]},a.gradeselectRef=r.a.createRef(),a.filterstudentslist=r.a.createRef(),a.filterstudentsinputid=r.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.get_all_teacher_grades_students_subjects_studentsubject()}},{key:"get_all_teacher_grades_students_subjects_studentsubject",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return t=e.sent,e.next=5,fetch("/get_all_teacher_grades_students_subjects_studentsubject/",{method:"GET",headers:t}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){a.setState({teachers:e.users,grades:e.grades,students:e.students,subjects:e.subjects,studentsubject:e.studentsubject})})).catch((function(e){k.a.error("Something went Wrong!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"student_selected",value:function(e){var t=e.target,a=t.attributes.value.value;this.setState({studentvalue:a}),this.addStudentToSubject(t,a),this.filterstudentsinputid.current.placeholder=this.state.students.find((function(e){return e.id==a})).student_name}},{key:"filterStudents",value:function(e){var t=e.target,a=t.value.toUpperCase(),n=t.nextElementSibling.nextElementSibling.childNodes[0].childNodes[1].childNodes;this.state.students.forEach((function(e){e.student_name.toUpperCase().indexOf(a)>-1?n.forEach((function(t){e.id==t.attributes.value.value&&(t.style.display="")})):n.forEach((function(t){e.id==t.attributes.value.value&&(t.style.display="none")}))}))}},{key:"addStudentToSubject",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,r=n.attributes.value.value,this.setState({studentvalue:r}),this.filterstudentsinputid.current.placeholder=this.state.students.find((function(e){return e.id==r})).student_name,""!=r){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.props.auth_headers();case 8:return(s=e.sent)["Content-Type"]="application/json",e.next=12,fetch("/addStudentToSubject/",{method:"POST",headers:s,body:JSON.stringify({student:r,subject:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){l.setState({studentsubject:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteStudentFromSubject",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return(n=e.sent)["Content-Type"]="application/json",e.next=6,fetch("/deleteStudentFromSubject/",{method:"POST",headers:n,body:JSON.stringify({student:t,subject:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){r.setState({studentsubject:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateStudentName",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(n=t.target.value)){e.next=3;break}return e.abrupt("return");case 3:return t.target.value=null,e.next=6,this.props.auth_headers();case 6:return(r=e.sent)["Content-Type"]="application/json",e.next=10,fetch("/updateStudentName/",{method:"POST",headers:r,body:JSON.stringify({student_name:n,student:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){s.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateStudentPhone",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(n=t.target.value)){e.next=3;break}return e.abrupt("return");case 3:return t.target.value=null,e.next=6,this.props.auth_headers();case 6:return(r=e.sent)["Content-Type"]="application/json",e.next=10,fetch("/updateStudentPhone/",{method:"POST",headers:r,body:JSON.stringify({phone:n,student:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){s.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateStudentAddress",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(n=t.target.value)){e.next=3;break}return e.abrupt("return");case 3:return t.target.value=null,e.next=6,this.props.auth_headers();case 6:return(r=e.sent)["Content-Type"]="application/json",e.next=10,fetch("/updateStudentAddress/",{method:"POST",headers:r,body:JSON.stringify({address:n,student:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){s.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateStudentDOB",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(n=t.target.value)){e.next=3;break}return e.abrupt("return");case 3:return t.target.value=null,e.next=6,this.props.auth_headers();case 6:return(r=e.sent)["Content-Type"]="application/json",e.next=10,fetch("/updateStudentDOB/",{method:"POST",headers:r,body:JSON.stringify({date_of_birth:n,student:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){s.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateStudentGrade",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,"none"!=(r=n.value)){e.next=4;break}return e.abrupt("return");case 4:return t.target.value=r,e.next=7,this.props.auth_headers();case 7:return(s=e.sent)["Content-Type"]="application/json",e.next=11,fetch("/updateStudentGrade/",{method:"POST",headers:s,body:JSON.stringify({student_grade:r,student:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){l.setState({students:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateSubjectTeacher",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,s,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,"none"!=(r=n.value)){e.next=4;break}return e.abrupt("return");case 4:return t.target.value=r,e.next=7,this.props.auth_headers();case 7:return(s=e.sent)["Content-Type"]="application/json",e.next=11,fetch("/updateSubjectTeacher/",{method:"POST",headers:s,body:JSON.stringify({teacher:r,subject:a})}).then((function(e){if(400!=e.status)if(401!=e.status){if(403!=e.status)return e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){l.setState({subjects:e})})).catch((function(e){k.a.error("Something went Wrong!")}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadStudentInformation",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth_headers();case 2:return(t=e.sent)["Content-Type"]="application/json",k.a.info("Please Wait. This may take some time.",{autoClose:!1,toastId:"studentuploadinfo"}),e.next=7,fetch("/uploadStudentInformation/",{method:"POST",headers:t,body:JSON.stringify({jsonfromcsv:this.state.jsonfromcsv})}).then((function(e){if(k.a.dismiss("studentuploadinfo"),400!=e.status)if(401!=e.status){if(403!=e.status)return 409==e.status&&k.a.error(e.statusText),e.json();k.a.error("Forbidden")}else k.a.error("Unauthorized");else k.a.error("Bad Request")})).then((function(e){if(e.exception)return k.a.warn(e.exception[0]+" Total Processed: "+e.processed,{autoClose:6e3}),void a.setState({students:e.students,jsonfromcsv:[]});a.setState({students:e,jsonfromcsv:[]}),k.a.success("Student data upload Completed")})).catch((function(){a.setState({students:[],jsonfromcsv:[]}),k.a.error("Something went Wrong!")}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-bordered table-responsive table-hover table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Phone"),r.a.createElement("td",null,"address"),r.a.createElement("td",null,"DOB"),r.a.createElement("td",null,"Grade")),this.state.students.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control form-control-sm",onBlur:function(a){return e.updateStudentName(a,t)},placeholder:t.student_name})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control form-control-sm",onBlur:function(a){return e.updateStudentPhone(a,t)},placeholder:t.phone})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control form-control-sm",onBlur:function(a){return e.updateStudentAddress(a,t)},placeholder:t.address})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control form-control-sm",onBlur:function(a){return e.updateStudentDOB(a,t)},placeholder:t.date_of_birth})),r.a.createElement("td",null,r.a.createElement("select",{onChange:function(a){return e.updateStudentGrade(a,t)},ref:e.gradeselectRef,className:"form-control form-control-sm my-auto",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},e.state.grades.find((function(e){return e.id==t.student_grade})).name),e.state.grades.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))))}))))),a=(r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"btn-group mx-auto my-auto"},r.a.createElement("div",{className:"form-inline input-group input-group-sm dropdown mx-2"},r.a.createElement("input",{type:"text",className:"form-control dropdown-toggle  my-auto","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",placeholder:"Search and Add",onKeyUp:function(t){return e.filterStudents(t)},ref:this.filterstudentsinputid}),r.a.createElement("span",{className:"input-group-text",disabled:!0},r.a.createElement(g.a,{icon:b.b})),r.a.createElement("div",{className:"dropdown-menu overflow-auto studentsearcheditsubjectstudent",style:{height:"200px"}},r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Students Name"))),r.a.createElement("tbody",{ref:this.filterstudentslist},this.state.students.map((function(t,a){return r.a.createElement("tr",{key:a,value:t.id},r.a.createElement("td",{onClick:function(t){return e.addStudentToSubject(t)},value:t.id},t.student_name))})))))))),r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table-responsive table table-bordered table-hover table-sm text-left"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"SN"),r.a.createElement("td",null,"CODE"),r.a.createElement("td",null,"Subject name"),r.a.createElement("td",null,"Teacher"),r.a.createElement("td",null,"Students")),this.state.subjects.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.code),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("select",{onChange:function(a){return e.updateSubjectTeacher(a,t)},ref:e.subjectselectRef,className:"form-control form-control-sm my-auto",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},e.state.teachers.find((function(e){return e.id==t.teacher})).username),e.state.teachers.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.username)})))),r.a.createElement("td",{className:"width-60"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"btn-group mx-auto my-auto"},r.a.createElement("div",{className:"form-inline input-group input-group-sm dropdown mx-2"},r.a.createElement("input",{type:"text",className:"form-control dropdown-toggle  my-auto","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",placeholder:"Search and Add",onKeyUp:function(t){return e.filterStudents(t)},ref:e.filterstudentsinputid}),r.a.createElement("span",{className:"input-group-text",disabled:!0},r.a.createElement(g.a,{icon:b.b})),r.a.createElement("div",{className:"dropdown-menu overflow-auto studentsearcheditsubjectstudent",style:{height:"200px"}},r.a.createElement("table",{className:"table table-bordered table-striped table-hover table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Students Name"))),r.a.createElement("tbody",{ref:e.filterstudentslist},e.state.students.map((function(a,n){return a.student_grade==t.grade?r.a.createElement("tr",{key:n,value:a.id},r.a.createElement("td",{onClick:function(a){return e.addStudentToSubject(a,t)},value:a.id},a.student_name)):null}))))))))," ",e.state.studentsubject.map((function(a,n){if(a.subject==t.id)return r.a.createElement("span",{className:"mx-1 btn-group btn-sm subjectstudentspan",key:n},e.state.students.find((function(e){return e.id==a.student})).student_name,r.a.createElement("button",{className:"btn btn-sm d-flex"},r.a.createElement(g.a,{icon:b.c,color:"red",onClick:function(){return e.deleteStudentFromSubject(a.student,t.id)}})))}))))})))))),n=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"inputfile"},r.a.createElement(G.a,{cssClass:"react-csv-input",label:"Select CSV with Student's information and header as the table header without SN",onFileLoaded:function(t,a){var n;n=t[0];var r=[];t.slice(1).map((function(e){var t={};t[n[0]]=e[0],t[n[1]]=e[1],t[n[2]]=e[2],t[n[3]]=e[3],t[n[4]]=e[4],r.push(t)})),e.setState({jsonfromcsv:r})}})),r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"SN"),r.a.createElement("td",null,"student"),r.a.createElement("td",null,"phone"),r.a.createElement("td",null,"address"),r.a.createElement("td",null,"dob"),r.a.createElement("td",null,"grade")),this.state.jsonfromcsv.map((function(t,a){return void 0==t.student||""==t.student?null:r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("input",{type:"text",onChange:function(t){var n=Object(C.a)(e.state.jsonfromcsv);n[a].student=t.target.value,e.setState({jsonfromcsv:n})},className:"form-control form-control-sm",value:t.student})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",onChange:function(t){var n=Object(C.a)(e.state.jsonfromcsv);n[a].phone=t.target.value,e.setState({jsonfromcsv:n})},className:"form-control form-control-sm",value:t.phone})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",onChange:function(t){var n=Object(C.a)(e.state.jsonfromcsv);n[a].address=t.target.value,e.setState({jsonfromcsv:n})},className:"form-control form-control-sm",value:t.address})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",onChange:function(t){var n=Object(C.a)(e.state.jsonfromcsv);n[a].dob=t.target.value,e.setState({jsonfromcsv:n})},className:"form-control form-control-sm",value:t.dob})),r.a.createElement("td",null,r.a.createElement("select",{onChange:function(t){var n=Object(C.a)(e.state.jsonfromcsv);n[a].grade=t.target.value,e.setState({jsonfromcsv:n})},className:"form-control form-control-sm my-auto",defaultValue:"none"},r.a.createElement("option",{value:"none",disabled:!0,hidden:!0},t.grade),e.state.grades.map((function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)})))))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},this.state.jsonfromcsv.length>0?r.a.createElement("button",{className:"btn btn-outline-success btn-sm",onClick:function(){return e.uploadStudentInformation()}},"Upload"):"Select students csv from above")))));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light my-2"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText1","aria-controls":"navbarText1","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText1"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",null," ",r.a.createElement("button",{className:"btn btn-sm mx-4",onClick:this.edit_student_clicked},"Edit Student Details")),r.a.createElement("li",null," ",r.a.createElement("button",{className:"btn btn-sm mx-4",onClick:this.edit_student_subject_clicked},"Edit Student Subject")),r.a.createElement("li",null," ",r.a.createElement("button",{className:"btn btn-sm mx-4",onClick:this.import_from_csv},"Import Student from CSV")))))),1==this.state.display?t:2==this.state.display?a:3==this.state.display?n:null)}}]),t}(n.Component);k.a.configure({autoClose:3e3,draggable:!1});var B=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).get_refresh_token=function(e){return e?localStorage.getItem("refresh"):a.refresh_token},a.handle_login=function(e,t){e.preventDefault(),fetch("/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return 401===e.status?-1:e.json()})).then((function(e){-1===e||e.non_field_errors?k.a.error("Unable to log in with provided credentials."):(a.set_refresh_token(a.local_storage,e.refresh),a.setState({logged_in:!0,displayed_form:"",access_token:e.access}),a.get_username(),a.check_admin())})).catch((function(e){k.a.error("Something went Wrong!")}))},a.handle_signup=function(e,t){e.preventDefault()},a.handle_logout=function(){localStorage.removeItem("refresh"),a.setState({logged_in:!1,username:"",userid:"",access_token:null}),a.refresh_token=""},a.display_form=function(e){a.setState({displayed_form:e})},a.display_home=function(){a.setState({displayed_form:"Home"})},a.auth_headers=function(){return a.state.access_token?{Authorization:"Bearer ".concat(a.state.access_token)}:{}},a.refresh_access_token=function(){return fetch("/api/token/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:'{\n          "refresh":"'.concat(a.get_refresh_token(a.local_storage),'"}')}).then((function(e){return e.json()})).then((function(e){if(!e.non_field_errors)return a.setState({access_token:e.access}),e.access;k.a.error("Couldn't Refresh. Something Went Wrong.")})).catch((function(e){k.a.error("Sorry. Something went wrong while refreshing.")}))},a.get_username=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.auth_headers(),e.next=3,fetch("/current_user/",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(e){void 0!=e.username&&(a.setState({username:e.username,userid:e.id}),k.a.success("Welcome "+a.state.username))}));case 3:case"end":return e.stop()}}),e)}))),a.check_admin=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.auth_headers(),e.next=3,fetch("/is_admin/",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(e){a.setState({is_admin:e})}));case 3:case"end":return e.stop()}}),e)}))),a.show_result=function(){a.setState({display_result:!0})},a.show_home=function(){a.setState({display_result:!1})};return a.state={displayed_form:"",logged_in:!!a.get_refresh_token(!1),username:"",userid:"",access_token:"",display_result:!1,is_admin:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"set_refresh_token",value:function(e,t){e?localStorage.setItem("refresh",t):this.refresh_token=t}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.get_refresh_token(e.local_storage)&&e.refresh_access_token()}),27e4)}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=r.a.createElement(_,{handle_login:this.handle_login});break;case"signup":e=r.a.createElement(x,{handle_signup:this.handle_signup});break;default:e=r.a.createElement(y,null)}return r.a.createElement("div",{className:"App"},r.a.createElement(p.Helmet,null,r.a.createElement("title",null,"Exam Report")),r.a.createElement(v,{logged_in:this.state.logged_in,display_form:this.display_form,handle_logout:this.handle_logout,display_home:this.display_home,username:this.state.username}),this.state.logged_in?"AdminInput"==this.state.displayed_form&&this.state.is_admin?r.a.createElement(A,{auth_headers:this.auth_headers,show_home:this.show_home,userid:this.state.userid}):this.state.display_result?r.a.createElement(T,{auth_headers:this.auth_headers,show_home:this.show_home,userid:this.state.userid}):r.a.createElement(N,{auth_headers:this.auth_headers,show_result:this.show_result}):e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(43),a(44);l.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.b5f76b47.chunk.js.map